import MagicString from "magic-string";
import { Literal, Program } from "estree";

//#region src/transforms/hoist.d.ts
declare function transformHoistInlineDirective(input: string, ast: Program, {
  runtime,
  rejectNonAsyncFunction,
  ...options
}: {
  runtime: (value: string, name: string, meta: {
    directiveMatch: RegExpMatchArray;
  }) => string;
  directive: string | RegExp;
  rejectNonAsyncFunction?: boolean;
  encode?: (value: string) => string;
  decode?: (value: string) => string;
  noExport?: boolean;
}): {
  output: MagicString;
  names: string[];
};
declare function findDirectives(ast: Program, directive: string): Literal[];
//#endregion
//#region src/transforms/wrap-export.d.ts
type ExportMeta = {
  declName?: string;
  isFunction?: boolean;
  defaultExportIdentifierName?: string;
};
type TransformWrapExportFilter = (name: string, meta: ExportMeta) => boolean;
type TransformWrapExportOptions = {
  runtime: (value: string, name: string, meta: ExportMeta) => string;
  ignoreExportAllDeclaration?: boolean;
  rejectNonAsyncFunction?: boolean;
  filter?: TransformWrapExportFilter;
};
declare function transformWrapExport(input: string, ast: Program, options: TransformWrapExportOptions): {
  exportNames: string[];
  output: MagicString;
};
//#endregion
//#region src/transforms/proxy-export.d.ts
type TransformProxyExportOptions = {
  /** Required for source map and `keep` options */
  code?: string;
  runtime: (name: string, meta?: {
    value: string;
  }) => string;
  ignoreExportAllDeclaration?: boolean;
  rejectNonAsyncFunction?: boolean;
  /**
  * escape hatch for Waku's `allowServer`
  * @default false
  */
  keep?: boolean;
};
declare function transformDirectiveProxyExport(ast: Program, options: {
  directive: string;
} & TransformProxyExportOptions): {
  exportNames: string[];
  output: MagicString;
} | undefined;
declare function transformProxyExport(ast: Program, options: TransformProxyExportOptions): {
  exportNames: string[];
  output: MagicString;
};
//#endregion
//#region src/transforms/utils.d.ts
declare function hasDirective(body: Program["body"], directive: string): boolean;
declare function getExportNames(ast: Program, options: {
  ignoreExportAllDeclaration?: boolean;
}): {
  exportNames: string[];
};
//#endregion
//#region src/transforms/server-action.d.ts
declare function transformServerActionServer(input: string, ast: Program, options: {
  runtime: (value: string, name: string) => string;
  rejectNonAsyncFunction?: boolean;
  encode?: (value: string) => string;
  decode?: (value: string) => string;
}): {
  exportNames: string[];
  output: MagicString;
} | {
  output: MagicString;
  names: string[];
};
//#endregion
export { transformDirectiveProxyExport as a, TransformWrapExportOptions as c, transformHoistInlineDirective as d, TransformProxyExportOptions as i, transformWrapExport as l, getExportNames as n, transformProxyExport as o, hasDirective as r, TransformWrapExportFilter as s, transformServerActionServer as t, findDirectives as u };